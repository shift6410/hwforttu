<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>語意網作業</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!--[if lt IE 9]>
    <script>
      document.createElement("article");
      document.createElement("aside");
      document.createElement("footer");
      document.createElement("header");
      document.createElement("main");
      document.createElement("nav");
      document.createElement("section");
    </script>
    <![endif]-->
  </head>
  <body>
    <header class="banner">
      <h1>basic information</h1>
      <p>person information</p>
    </header>

    <nav>
      <ul>
        <li><a href="hometown.html">Home</a></li>
        <li><a href="about.html">About</a></li>
		<li><a href="interact.html">Interact</a></li>
      </ul>
    </nav>

    <main>
      
		<body>
		<p id ='text'>TEST Interact</p> 
		<div>
		<button id="jsstyle"
		onclick="js_style()">Style</button>
		</div>
		</body>
		<section>
				<h2>Text</h2>
				<article>
					<p>This is a test for text.</p>
					<p>You can search this text.</p>
					<p>Those text can replace to other text you want.</p>
					<p>Those text can change their color.</p>
					<br>
					<form>
					  <label for="search">請輸入欲尋找文字：</label>
					  <input type="text" id="search" name="尋找">
					  <button type="button" onClick="searchF(0)">尋找</button><br>
					  <label for="replace">請輸入欲修改文字：</label>
					  <input type="text" id="replace" name="修改">
					  <button type="button" onClick="searchF(1)">修改</button><br>
					</form>
				</article>
			</section>

		<script>
			function changeB(B1, B2)
			{
				document.getElementById(B1).style.display = "none";
				document.getElementById(B2).style.display = "block";
			}
			function showN(fname, lname)
			{
				document.getElementById("showName").innerHTML = "Your name is : " + fname + " " + lname;
			}
			var searchlog = undefined;
			var replacelog = undefined;
			var tag = [];
			tag[0] = document.getElementsByTagName("p");
			tag[1] = document.getElementsByTagName("label");
			tag[2] = document.getElementsByTagName("button");
			tag[3] = document.getElementsByTagName("a");
			tag[4] = document.getElementsByTagName("h1");
			tag[5] = document.getElementsByTagName("h2");
			function searchF(r)
			{
				if(replacelog) clear(replacelog);
				else if(searchlog) clear(searchlog);
				replacelog = searchlog = undefined;
			
				var searchText = document.getElementById("search").value;
				if(searchText.length == 0)
				{
					alert("請輸入欲尋找文字");
					return false;
				}
				var searchRE = new RegExp(searchText, 'g');
				if(!r)
				{
					for(var i = 0; i < tag.length; i++)
					{
						for(var j = 0; j < tag[i].length; j++)
						{
							var newHTML = tag[i][j].innerHTML;
							tag[i][j].innerHTML = newHTML.replace(searchRE, "<span style='background:yellow;'>" + searchText + "</span>");
						}
					}
					searchlog = searchText;
				}
				if(!r) return false;
				var replaceText = document.getElementById("replace").value;
				for(var i = 0; i < tag.length; i++)
				{
					for(var j = 0; j < tag[i].length; j++)
					{
						var newHTML = tag[i][j].innerHTML;
						tag[i][j].innerHTML = newHTML.replace(searchRE, "<span style='background:red;'>" + replaceText + "</span>");
					}
				}
				replacelog = replaceText;
			}
			function clear(log)
			{
				var logRE = new RegExp('<span style=\\"background:r?e?d?y?e?l?l?o?w?;\\">' + log + "<\\/span>", 'g');
				console.log(logRE);
				for(var i = 0; i < tag.length; i++)
				{
					for(var j = 0; j < tag[i].length; j++)
					{
						var newHTML = tag[i][j].innerHTML;
						tag[i][j].innerHTML = newHTML.replace(logRE, log);
					}
				}
			}
		</script>

    <footer>
      <p>Fighting,Olige!!!</p>
    </footer>
	<script>
	function js_style() 
	{
	//font styles added by JS:
	 text.style.fontSize = "15pt";
	 text.style.fontFamily = "Comic Sans MS";
	 text.style.color = "green";
	}
	</script>
  </body>
</html>

